<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>响应式底层原理</title>
</head>
<body>
    <div id="container">1</div>
    <button id="button" type="button">点击+1</button>
    <button id="login" type="button">登录</button>
</body>
<script>
    // js dom api
    // 不利于业务开发，性能差
    // document.getElementById('button').addEventListener('click',function(){
    //     var container = doucument.getElementById('container');
    //     // 显式类型转换
    //     container.innerHTML = Number(container.innerHTML)+1
    // })
    // 响应式开发 数据状态 它发生改变，数据绑定的地方会自动更新
    // MVVM 设计模式 Model(count) View(container) ViewModel(JSX)

    //1.状态
    // 定义对象实现
    var obj ={
        // 监听这个状态的改变
        value:1,//数据 怎么变成响应式？状态？
        isLogin:false,// 数据状态
    }
    let value = 1
    let isLogin = false

    Object.defineProperty(obj,"value",{
        // 定义obj 上的value属性，有写什么样的操作
        get:function(){
            console.log('读取了value属性')
            return value;
        },
        // 拦截
        set:function(newValue){
            console.log('修改了value属性')
            value = newValue
            document.getElementById('container').innerHTML = newValue//更新DOM

        }
    })
    Object.defineProperty(obj,"isLogin",{
        get:function(){
            console.log('读取了isLogin属性')
            return isLogin;
        },
        set:function(newValue){
            console.log('修改了isLogin属性')
            isLogin = newValue
            if(isLogin){
                document.getElementById('login').innerHTML = '退出'
            }else{
                document.getElementById('login').innerHTML = '登录'
            }
        }
    })

    document.getElementById('button').addEventListener('click',function(){
        obj.value++//专注于业务，不需要更新DOM
    })
    document.getElementById('login').addEventListener('click',function(){
        obj.isLogin = !obj.isLogin
    })

</script>
</html>