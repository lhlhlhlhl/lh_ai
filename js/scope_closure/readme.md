# JS 执行机制
- 调用栈
  记录函数的执行顺序，管理执行上下文和变量环境
- 作用域
  变量查找的规则
  当前作用域 -》 冒泡到上级作用域 -》 一直到全局作用域
- 作用域链
  变量查找的路径
- 执行上下文  函数被调用  执行上下文创建（创建时分为编译阶段和执行阶段，编译阶段会将当前作用域申明的变量，函数变量提升放到变量环境中，let const放到TDZ里）  执行上下文入栈   执行上下文出栈
  函数调用时创建的代码执行的上下文对象
- 变量环境
    var 函数 变量提升
- 词法环境
    const let TDZ
- 词法作用域

在每个执行上下文的变量环境中，都包含一个外部引用outer，用来指向外部的执行上下文
## 作用域链
- 一段代码使用一个变量时，JS引擎首先会在当前的执行上下文中查找该变量
- 如果没有找到，会继续在外部的执行上下文中查找
- 直到找到该变量或者到达全局执行上下文
查找的路径就叫作用域链

## 词法作用域
变量查找的路径是在代码编写时就确定的，与函数调用位置无关
代码中函数申明的位置来决定，静态的
预测代码在执行过程中如何查找变量
  
词法作用域是代码编译阶段就决定好了的，和函数怎么调用没有关系

## 闭包
函数嵌套函数，内部函数可以访问外部函数的变量
基础是理解词法作用域等
根据词法作用域的规则，内部函数getName和setName总是可以访问外部函数foo中的变量

根据词法作用域的规则，内部函数总是可以访问其外部函数中申明的变量（自由变量），当通过调用一个外部函数返回一个内部函数后，即使该外部函数已经执行完了，但是内部函数引用了外部函数的变量依然保存在内存中，我们把这些变量的集合称为闭包。
foo外部函数，这些变量的集合称为foo函数的闭包
这些变量的集合也是内部函数运行的专属背包。