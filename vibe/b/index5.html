<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æµ·é¾Ÿæ±¤æ¨ç†æ¸¸æˆ</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #1a2a6c);
            color: #fff;
            min-height: 100vh;
            padding: 20px;
            overflow-x: hidden;
            position: relative;
        }
        
        body::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('https://images.unsplash.com/photo-1505506874110-6a7a69069a08?q=80&w=1000') no-repeat center center;
            background-size: cover;
            opacity: 0.1;
            z-index: -1;
        }
        
        /* å¼€å§‹é¡µé¢æ ·å¼ */
        #start-screen {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            text-align: center;
            padding: 20px;
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: 10;
            transition: opacity 0.8s ease, transform 0.8s ease;
        }
        
        .start-content {
            max-width: 800px;
            padding: 40px;
            background: rgba(25, 25, 60, 0.95);
            border-radius: 20px;
            box-shadow: 0 15px 50px rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            animation: fadeIn 1.2s ease;
            border: 2px solid rgba(255, 126, 95, 0.5);
        }
        
        .logo {
            font-size: 5rem;
            color: #ff7e5f;
            margin-bottom: 20px;
            text-shadow: 0 0 20px rgba(255, 126, 95, 0.7);
            animation: pulse 2s infinite;
        }
        
        h1 {
            font-size: 3.5rem;
            margin-bottom: 20px;
            background: linear-gradient(to right, #ff7e5f, #feb47b);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
            font-weight: 800;
            letter-spacing: 1px;
        }
        
        .subtitle {
            font-size: 1.4rem;
            margin-bottom: 30px;
            line-height: 1.6;
            color: #e0e0ff;
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
            font-weight: 300;
        }
        
        .start-btn {
            padding: 18px 50px;
            background: linear-gradient(to right, #ff7e5f, #feb47b);
            color: white;
            border: none;
            border-radius: 50px;
            font-size: 1.4rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.4s ease;
            box-shadow: 0 8px 25px rgba(255, 126, 95, 0.5);
            margin-top: 30px;
            position: relative;
            overflow: hidden;
        }
        
        .start-btn:hover {
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 12px 35px rgba(255, 126, 95, 0.7);
        }
        
        .start-btn:active {
            transform: translateY(2px);
        }
        
        .start-btn::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            transition: 0.5s;
        }
        
        .start-btn:hover::after {
            left: 100%;
        }
        
        .features {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 50px;
            flex-wrap: wrap;
        }
        
        .feature {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 25px;
            width: 220px;
            transition: all 0.4s ease;
            border: 2px solid rgba(255, 126, 95, 0.3);
            backdrop-filter: blur(5px);
        }
        
        .feature:hover {
            transform: translateY(-10px);
            background: rgba(255, 255, 255, 0.15);
            border-color: #ff7e5f;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
        }
        
        .feature i {
            font-size: 2.5rem;
            color: #ff9a8b;
            margin-bottom: 15px;
        }
        
        .feature h3 {
            font-size: 1.4rem;
            margin-bottom: 10px;
            color: #ff9a8b;
        }
        
        .feature p {
            font-size: 1rem;
            opacity: 0.9;
            line-height: 1.5;
        }
        
        /* æ¸¸æˆé¡µé¢æ ·å¼ */
        .container {
            display: flex;
            max-width: 1400px;
            margin: 0 auto;
            gap: 20px;
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.8s ease, transform 0.8s ease;
        }
        
        .show-game {
            opacity: 1;
            transform: translateY(0);
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255, 126, 95, 0.3);
        }
        
        .game-container {
            flex: 3;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .sidebar {
            flex: 1;
            background: rgba(25, 25, 60, 0.85);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
            overflow-y: auto;
            max-height: 85vh;
            border: 1px solid rgba(255, 126, 95, 0.3);
        }
        
        .card {
            background: rgba(30, 30, 70, 0.85);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            backdrop-filter: blur(5px);
            margin-bottom: 20px;
            border: 1px solid rgba(255, 126, 95, 0.3);
        }
        
        .game-title {
            font-size: 1.8rem;
            margin-bottom: 20px;
            color: #ff9a8b;
            text-align: center;
            padding-bottom: 15px;
            border-bottom: 2px solid rgba(255, 126, 95, 0.3);
        }
        
        .soup-surface {
            font-size: 1.2rem;
            line-height: 1.8;
            margin-bottom: 25px;
            background: rgba(0, 0, 0, 0.3);
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid #ff7e5f;
        }
        
        .soup-bottom {
            font-size: 1.1rem;
            line-height: 1.7;
            background: rgba(0, 0, 0, 0.3);
            padding: 20px;
            border-radius: 10px;
            display: none;
            margin-top: 20px;
            border-left: 4px solid #ff7e5f;
            animation: fadeIn 0.8s ease;
        }
        
        .input-area {
            display: flex;
            gap: 10px;
            margin: 15px 0;
            position: relative;
        }
        
        input {
            flex: 1;
            padding: 14px 20px;
            border-radius: 50px;
            border: none;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 1.1rem;
            outline: none;
            border: 2px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
        }
        
        input:focus {
            border-color: #ff7e5f;
            background: rgba(255, 255, 255, 0.15);
            box-shadow: 0 0 10px rgba(255, 126, 95, 0.5);
        }
        
        button {
            padding: 14px 25px;
            background: linear-gradient(to right, #ff7e5f, #feb47b);
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(255, 126, 95, 0.4);
        }
        
        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(255, 126, 95, 0.6);
        }
        
        button:active {
            transform: translateY(1px);
        }
        
        .btn-group {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 10px;
        }
        
        .hint-btn {
            background: linear-gradient(to right, #4facfe, #00f2fe);
        }
        
        .giveup-btn {
            background: linear-gradient(to right, #ff416c, #ff4b2b);
        }
        
        .clues-box {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            padding: 20px;
            max-height: 300px;
            overflow-y: auto;
            margin-top: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .clue {
            padding: 12px 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: flex-start;
            transition: all 0.3s ease;
        }
        
        .clue:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateX(5px);
        }
        
        .clue-question {
            font-weight: bold;
            color: #ff9a8b;
            margin-right: 10px;
        }
        
        .clue-answer {
            background: rgba(25, 25, 60, 0.9);
            padding: 5px 12px;
            border-radius: 20px;
            font-weight: bold;
            display: inline-block;
            margin-top: 5px;
        }
        
        .clue-yes {
            color: #4ade80;
            border: 1px solid #4ade80;
        }
        
        .clue-no {
            color: #f87171;
            border: 1px solid #f87171;
        }
        
        .clue-irrelevant {
            color: #94a3b8;
            border: 1px solid #94a3b8;
        }
        
        .clue-hint {
            color: #60a5fa;
            border: 1px solid #60a5fa;
        }
        
        .games-list {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
        }
        
        .game-item {
            background: rgba(40, 40, 80, 0.8);
            padding: 18px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }
        
        .game-item:hover {
            transform: translateY(-5px);
            background: rgba(60, 60, 100, 0.9);
            border-color: #ff7e5f;
        }
        
        .game-item.active {
            background: rgba(60, 60, 100, 0.9);
            border-color: #ff7e5f;
            box-shadow: 0 5px 15px rgba(255, 126, 95, 0.4);
        }
        
        .game-item h3 {
            font-size: 1.2rem;
            margin-bottom: 8px;
            color: #ff9a8b;
        }
        
        .game-item p {
            font-size: 0.95rem;
            opacity: 0.8;
            line-height: 1.5;
        }
        
        .success-message {
            text-align: center;
            padding: 20px;
            background: rgba(46, 213, 115, 0.2);
            border-radius: 10px;
            margin-top: 20px;
            display: none;
            animation: pulse 2s infinite;
            border: 1px solid rgba(46, 213, 115, 0.3);
        }
        
        .music-control {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: rgba(25, 25, 60, 0.9);
            border-radius: 50%;
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            z-index: 100;
            transition: all 0.3s ease;
        }
        
        .music-control:hover {
            transform: scale(1.1);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4);
        }
        
        .music-control i {
            font-size: 1.8rem;
            color: #ff7e5f;
        }
        
        .progress-container {
            margin-top: 20px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            padding: 15px;
        }
        
        .progress-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 0.9rem;
            color: #ff9a8b;
        }
        
        .progress-bar {
            height: 10px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 5px;
            overflow: hidden;
        }
        
        .progress {
            height: 100%;
            background: linear-gradient(to right, #ff7e5f, #feb47b);
            border-radius: 5px;
            width: 0%;
            transition: width 0.5s ease;
        }
        
        .ai-thinking {
            position: absolute;
            right: 100px;
            top: 50%;
            transform: translateY(-50%);
            color: #94a3b8;
            font-size: 0.9rem;
            display: none;
        }
        
        .thinking-dots {
            display: inline-block;
            width: 10px;
            overflow: hidden;
            vertical-align: bottom;
            animation: dotPulse 1.5s infinite;
        }
        
        .error-message {
            background: rgba(220, 53, 69, 0.2);
            padding: 10px;
            border-radius: 5px;
            margin-top: 10px;
            display: none;
            border: 1px solid rgba(220, 53, 69, 0.3);
            text-align: center;
        }
        
        /* åŠ¨ç”»æ•ˆæœ */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(46, 213, 115, 0.4); }
            70% { box-shadow: 0 0 0 15px rgba(46, 213, 115, 0); }
            100% { box-shadow: 0 0 0 0 rgba(46, 213, 115, 0); }
        }
        
        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-15px); }
            100% { transform: translateY(0px); }
        }
        
        @keyframes dotPulse {
            0% { width: 0; }
            50% { width: 15px; }
            100% { width: 0; }
        }
        
        .instructions {
            margin-top: 20px;
            padding: 15px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            font-size: 0.95rem;
            line-height: 1.6;
        }
        
        .instructions h3 {
            color: #ff9a8b;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
        }
        
        .instructions h3 i {
            margin-right: 10px;
        }
        
        .instructions ul {
            padding-left: 20px;
        }
        
        .instructions li {
            margin-bottom: 8px;
            display: flex;
            align-items: flex-start;
        }
        
        .instructions li i {
            margin-right: 8px;
            color: #ff7e5f;
            margin-top: 4px;
        }
        
        @media (max-width: 900px) {
            .container {
                flex-direction: column;
            }
            
            .sidebar {
                max-height: none;
            }
            
            .features {
                flex-direction: column;
                align-items: center;
            }
            
            h1 {
                font-size: 2.5rem;
            }
            
            .subtitle {
                font-size: 1.2rem;
            }
            
            .game-item {
                padding: 15px;
            }
            
            .ai-thinking {
                right: 90px;
                font-size: 0.8rem;
            }
        }
        
        @media (max-width: 500px) {
            .start-content {
                padding: 20px;
            }
            
            .logo {
                font-size: 3.5rem;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .subtitle {
                font-size: 1rem;
            }
            
            .start-btn {
                padding: 15px 30px;
                font-size: 1.2rem;
            }
            
            .feature {
                width: 100%;
                padding: 20px;
            }
            
            .input-area {
                flex-direction: column;
            }
            
            .btn-group {
                flex-direction: column;
            }
            
            .ai-thinking {
                position: static;
                margin-top: 10px;
                transform: none;
                text-align: center;
            }
        }
    </style>
</head>
<body>
    <!-- å¼€å§‹é¡µé¢ -->
    <div id="start-screen">
        <div class="start-content">
            <div class="logo">
                <i class="fas fa-brain"></i>
            </div>
            <h1>æµ·é¾Ÿæ±¤æ¨ç†æ¸¸æˆ</h1>
            <p class="subtitle">æŒ‘æˆ˜ä½ çš„é€»è¾‘æ€ç»´ä¸æ¨ç†èƒ½åŠ›ï¼é€šè¿‡å‘æ™ºèƒ½ä½“æé—®è·å–"æ˜¯"æˆ–"ä¸æ˜¯"çš„çº¿ç´¢ï¼Œé€æ­¥æ­å¼€æ¯ä¸ªç¥ç§˜äº‹ä»¶èƒŒåçš„çœŸç›¸ã€‚ä»”ç»†è§‚å¯Ÿè°œé¢æè¿°ï¼Œæå‡ºç²¾å‡†é—®é¢˜ï¼Œæˆä¸ºæ¨ç†å¤§å¸ˆï¼</p>
            
            <button class="start-btn" id="start-btn">
                å¼€å§‹æ¸¸æˆ <i class="fas fa-arrow-right"></i>
            </button>
            
            <div class="features">
                <div class="feature">
                    <i class="fas fa-lightbulb"></i>
                    <h3>çƒ§è„‘è°œé¢˜</h3>
                    <p>ç²¾é€‰7ä¸ªç²¾å¿ƒè®¾è®¡çš„æµ·é¾Ÿæ±¤è°œé¢˜ï¼ŒæŒ‘æˆ˜ä½ çš„æ¨ç†æé™</p>
                </div>
                <div class="feature">
                    <i class="fas fa-robot"></i>
                    <h3>æ™ºèƒ½åŠ©æ‰‹</h3>
                    <p>ä¸AIæ™ºèƒ½ä½“äº’åŠ¨ï¼Œè·å–å…³é”®çº¿ç´¢æ¨è¿›æ¨ç†</p>
                </div>
                <div class="feature">
                    <i class="fas fa-music"></i>
                    <h3>æ²‰æµ¸ä½“éªŒ</h3>
                    <p>æ°›å›´éŸ³ä¹ä¸æ‚¬ç–‘è®¾è®¡ï¼Œå¸¦æ¥æ²‰æµ¸å¼è§£è°œä½“éªŒ</p>
                </div>
            </div>
        </div>
    </div>
    
    <!-- éŸ³ä¹æ§åˆ¶ -->
    <div class="music-control" id="music-control">
        <i class="fas fa-music"></i>
    </div>
    
    <!-- æ¸¸æˆé¡µé¢ -->
    <header>
        <h1>æµ·é¾Ÿæ±¤æ¨ç†æ¸¸æˆ</h1>
        <p class="subtitle">æŒ‘æˆ˜ä½ çš„æ¨ç†èƒ½åŠ›ï¼é€šè¿‡æé—®æ™ºèƒ½ä½“è·å–"æ˜¯"æˆ–"ä¸æ˜¯"çš„çº¿ç´¢ï¼Œé€æ­¥æ­å¼€æ¯ä¸ªç¥ç§˜äº‹ä»¶èƒŒåçš„çœŸç›¸</p>
    </header>
    
    <div class="container" id="game-container">
        <div class="game-container">
            <div class="card">
                <h2 class="game-title" id="current-title">è¯·ä»å³ä¾§é€‰æ‹©ä¸€ä¸ªè°œé¢˜å¼€å§‹</h2>
                <div class="soup-surface" id="soup-surface">
                    é€‰æ‹©ä¸€ä¸ªæµ·é¾Ÿæ±¤è°œé¢˜åï¼Œè¿™é‡Œå°†æ˜¾ç¤ºè°œé¢æè¿°ã€‚ä½ éœ€è¦é€šè¿‡å‘æ™ºèƒ½ä½“æé—®æ¥è·å–çº¿ç´¢ï¼Œé€æ­¥æ¨ç†å‡ºäº‹ä»¶çœŸç›¸ã€‚
                </div>
                
                <div class="soup-bottom" id="soup-bottom">
                    <!-- æ±¤åº•å†…å®¹ä¼šåœ¨è¿™é‡Œæ˜¾ç¤º -->
                </div>
                
                <div class="input-area">
                    <input type="text" id="question-input" placeholder="å‘æ™ºèƒ½ä½“æé—®ï¼ˆä¾‹å¦‚ï¼šäº‹ä»¶ä¸­æœ‰è¶…è‡ªç„¶å…ƒç´ å—ï¼Ÿï¼‰">
                    <button id="ask-btn">æé—®</button>
                    <div class="ai-thinking" id="ai-thinking">
                        æ™ºèƒ½ä½“æ€è€ƒä¸­<span class="thinking-dots">...</span>
                    </div>
                </div>
                
                <div class="error-message" id="error-message">
                    <!-- é”™è¯¯æ¶ˆæ¯ä¼šæ˜¾ç¤ºåœ¨è¿™é‡Œ -->
                </div>
                
                <div class="btn-group">
                    <button class="hint-btn" id="hint-btn">è·å–æç¤º</button>
                    <button class="giveup-btn" id="giveup-btn">æ”¾å¼ƒè§£å¯†</button>
                </div>
                
                <div class="clues-box" id="clues-box">
                    <div class="clue">
                        <div>
                            <div class="clue-question">çº¿ç´¢å°†åœ¨è¿™é‡Œæ˜¾ç¤º</div>
                            <div>æé—®åï¼Œæ™ºèƒ½ä½“çš„å›ç­”ä¼šå‡ºç°åœ¨çº¿ç´¢æ¡†ä¸­</div>
                        </div>
                    </div>
                </div>
                
                <div class="progress-container">
                    <div class="progress-label">
                        <span>æ¨ç†è¿›åº¦</span>
                        <span id="progress-percent">0%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress" id="progress-bar"></div>
                    </div>
                </div>
                
                <div class="success-message" id="success-message">
                    <h3>ğŸ‰ æ­å–œä½ æˆåŠŸè§£å¯†ï¼ ğŸ‰</h3>
                    <p>ä½ å·²æˆåŠŸæ¨ç†å‡ºäº‹ä»¶çš„å…¨éƒ¨çœŸç›¸ï¼</p>
                </div>
            </div>
        </div>
        
        <div class="sidebar">
            <h2>æµ·é¾Ÿæ±¤è°œé¢˜åº“</h2>
            <div class="games-list" id="games-list">
                <!-- æ¸¸æˆåˆ—è¡¨ä¼šç”±JSåŠ¨æ€ç”Ÿæˆ -->
            </div>
            
            <div class="instructions">
                <h3><i class="fas fa-book"></i> æ¸¸æˆæŒ‡å—ï¼š</h3>
                <ul>
                    <li><i class="fas fa-check-circle"></i> ä»å³ä¾§é€‰æ‹©ä¸€ä¸ªè°œé¢˜å¼€å§‹æ¸¸æˆ</li>
                    <li><i class="fas fa-check-circle"></i> ä»”ç»†é˜…è¯»"æ±¤é¢"ï¼ˆè°œé¢˜æè¿°ï¼‰</li>
                    <li><i class="fas fa-check-circle"></i> åœ¨è¾“å…¥æ¡†ä¸­å‘æ™ºèƒ½ä½“æé—®ï¼Œåªèƒ½å›ç­”"æ˜¯"ã€"ä¸æ˜¯"æˆ–"æ— å…³"</li>
                    <li><i class="fas fa-check-circle"></i> é€šè¿‡çº¿ç´¢é€æ­¥æ¨ç†äº‹ä»¶çœŸç›¸</li>
                    <li><i class="fas fa-check-circle"></i> å¡ä½æ—¶å¯ç‚¹å‡»"è·å–æç¤º"è·å¾—é¢å¤–çº¿ç´¢</li>
                    <li><i class="fas fa-check-circle"></i> æˆåŠŸè§£å¯†åæ±¤åº•ä¼šè‡ªåŠ¨æ˜¾ç¤º</li>
                    <li><i class="fas fa-check-circle"></i> å®åœ¨æ— æ³•è§£å¼€æ—¶å¯é€‰æ‹©"æ”¾å¼ƒè§£å¯†"</li>
                </ul>
            </div>
        </div>
    </div>
    
    <audio id="background-music" loop>
        <source src="https://er-sycdn.kuwo.cn/dd5d6b24033ec46b83004be339626c43/685bc3e3/resource/30106/trackmedia/M500004Nq9UV0k4i7Z.mp3?bitrate$128&from=vip" type="audio/mpeg">
        æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒéŸ³é¢‘å…ƒç´ 
    </audio>

    <script>
        // æµ·é¾Ÿæ±¤æ•°æ®
        const games = [
            {
                id: 1,
                title: "ç‰›åƒè‰",
                surface: "æœ‰ä¸€ä¸ªå¹´è½»çš„ç”·äººï¼Œä»–çš„æˆ¿å­å’Œé‚»å±…å¤«å¦‡çš„æˆ¿å­ä¸­é—´éš”ç€ä¸€ç‰‡è‰åªã€‚æœ‰ä¸€å¤©æ·±å¤œï¼Œç”·äººè¢«éš”å£çš„åµæ¶å£°åµé†’ï¼Œä¹‹åä»–åˆå¬åˆ°äº†æ‘”ä¸œè¥¿å£°ã€ç æ–§å­å£°å’Œç‰›åƒè‰çš„å£°éŸ³ï¼Œè¿‡äº†ä¸€ä¼šï¼Œä»–åˆå¬åˆ°äº†æœ‰äººæ’ä»–å®¶é—¨çš„å£°éŸ³ï¼Œä½†ä»–éƒ½æ²¡æœ‰ç†ä¼šï¼Œåˆç¡äº†è¿‡å»ã€‚ç¬¬äºŒå¤©ï¼Œä»–å‘ç°éš”å£çš„å¥³ä¸»äººæƒ¨æ­»åœ¨ä»–å®¶é—¨å£ã€‚",
                bottom: "å¤«å¦»ä¿©ä¸çŸ¥ä½•æ•…åœ¨å±‹å†…åµæ¶ï¼Œå¥³å—å®³äººæ°”æ€¥è€Œå¼€å§‹æ‘”ä¸œè¥¿ï¼Œç”·ä¸»äººä¸€æ—¶æ°”æ¨äº¤åŠ ï¼Œå› æ­¤å³æ‰‹æŠ„èµ·è–„åˆƒåˆ©å™¨ï¼Œå·¦æ‰‹æ‹¨å¦»å­èˆŒï¼Œå‰²æ‰äº†å¥¹çš„èˆŒå¤´ï¼Œå«å¥¹ä¸èƒ½å†åµï¼Œæ•´ä¸ªè¿‡ç¨‹ä¸­å› å—å®³äººèˆŒå¤´è¢«æ‹¨å‡ºï¼Œæ— æ³•å‘éŸ³æ±‚æ•‘ï¼Œè€Œè–„åˆƒåˆ©å™¨å‰²èˆŒä¸ä¼šäº§ç”Ÿå¤§å£°å“ï¼Œæ•…é‚»å±…æ²¡æœ‰å¬åˆ°è¿™ä¸€æ®µï¼›ç”·ä¸»äººç»§åå†ç”¨åˆ©æ–§ç æ‰äº†å¥¹çš„åŒè‡‚ï¼Œå«å¥¹ä¸èƒ½å†æ‰”ä¸œè¥¿ï¼Œç”±äºå¤§æ–§ç è‚‰é€šå¸¸éƒ½ä¼šæœ‰è¾ƒå¤§å£°å“ï¼Œå› æ­¤é‚»å±…èƒ½å¬åˆ°ã€‚é‚£ç”·ä¸»äººè¡Œå‡¶æ¯•ï¼Œè§æ­¤å‡¶æ™¯ï¼Œå…¨å› ä¸€æ—¶å†²åŠ¨ï¼Œçªå‘æš´è¡Œï¼Œè¡Œå‡¶åè¢«è‡ªå·±ä¸æ­£å¸¸çš„æš´è¡Œå’Œè¡€è…¥åœºé¢æ‰€æƒŠæ„•ï¼Œå‘†åœ¨åŸåœ°å¤´è„‘ä¸€ç‰‡ç©ºç™½ã€‚å¦»å­çªé­æ¨ªç¥¸ï¼ŒæƒŠæä¸‡çŠ¶ï¼Œé€ƒå‡ºæˆ¿é—¨ï¼Œé€ƒå‡ºæˆ¿é—¨çš„å¦»å­è¿™æ—¶å› ä¸ºå¤±å»äº†åŒè‡‚è†€å°±è¶´åœ¨è‰åœ°ä¸Šå’¬äº†å¤§æŠŠé’è‰å«åœ¨å˜´é‡Œï¼Œè¯•å›¾ä¸ºèˆŒå¤´æ­¢è¡€ï¼Œè¿™å°±æ˜¯ç‰›åƒè‰å£°çš„ç”±æ¥ï¼Œç»§è€Œæå…¶å¤«è¿½å‡ºï¼Œæ€¥å¥”é‚»å±…å®¶å¤§é—¨æ±‚æ•‘ï¼Œæ—¢ä¸èƒ½å–Šåˆä¸èƒ½æ•²é—¨ï¼Œåªå¥½ç”¨èº«ä½“æ’é—¨ï¼Œè¿™å°±æ˜¯é‚»å±…ä¸ºä»€ä¹ˆåªå¬è§æœ‰äººæ’é—¨ï¼Œä½†æ²¡å¬åˆ°äººå£°æˆ–æ•²é—¨å£°çš„åŸå› ï¼Œè¯•æƒ³ï¼Œä»–è¿è‰åœ°ä¸Šæ‹”è‰å£°éƒ½èƒ½å¬åˆ°ï¼Œå‡å¦‚å¥³äººåœ¨é—¨å¤–å–Šè¯ï¼Œä»–åˆæ€ä¹ˆä¼šå¬ä¸åˆ°ï¼Ÿä½†é‚»å±…æœªåŠ ç†ä¼šï¼Œå—å®³äººå› åŒè‡‚å¤±è¡€è¿‡å¤šï¼ŒåˆåŠ ä¹‹å‘åŠ›æ’é—¨ï¼ŒåŠ é€Ÿäº†è¡€æ¶²æµå¤±ï¼Œäºæ˜¯å¾ˆå¿«æ™•å€’åœ¨åœ°ï¼Œç»ˆå› å¤±è¡€è¿‡å¤šè€Œæ­»ã€‚å…¶å¤«äº‹åç•¥ä¸ºæ¸…é†’è¿‡æ¥ç«‹å³æ„è¯†åˆ°è‡ªå·±å¿…ç„¶éš¾é€ƒæ³•å¾‹åˆ¶è£ï¼Œé¡¾ä¸å¾—åˆ°é‚»å±…é—¨å‰è¿½æ€å¦»å­ï¼Œè€Œæ˜¯è¿…é€Ÿé€ƒç¦»è‡ªå®¶æˆ¿å±‹ã€‚ç¬¬äºŒå¤©æ—©ä¸Šï¼Œé‚»å±…å¼€é—¨ä¸€çœ‹ï¼Œåªè§å—å®³äººåŒè‡‚å…¨æ— ï¼Œæ»¡åœ°é²œè¡€ï¼Œä¸å¯è°“ä¸æƒ¨ã€‚",
                clues: [
                    "äº‹ä»¶å‘ç”Ÿåœ¨é‚»å±…å¤«å¦‡ä¹‹é—´",
                    "å¥³ä¸»äººå¤±å»äº†èˆŒå¤´",
                    "å¥³ä¸»äººå¤±å»äº†åŒè‡‚",
                    "ç‰›åƒè‰çš„å£°éŸ³æ˜¯å¥³ä¸»äººå‘å‡ºçš„",
                    "æ’é—¨å£°æ˜¯å¥³ä¸»äººç”¨èº«ä½“æ’é—¨",
                    "ç”·ä¸»äººé€ƒç¦»äº†ç°åœº"
                ]
            },
            {
                id: 2,
                title: "æ‰­æ›²çš„çˆ±",
                surface: "æˆ‘çš„çˆ¶æ¯éƒ½ä¸ç†æˆ‘ï¼Œä½†æˆ‘è¿˜æ˜¯å¾ˆçˆ±ä»–ä»¬ã€‚",
                bottom: "å°æ—¶å€™æˆ‘æ˜¯ä¸ªå¾ˆå¬è¯çš„å­©å­ï¼Œçˆ¸çˆ¸å¦ˆå¦ˆç»å¸¸ç»™æˆ‘å¥½åƒçš„æ°´æœï¼Œæˆ‘åƒä¸å®Œã€‚ä»–ä»¬å°±å‘Šè¯‰æˆ‘å–œæ¬¢çš„ä¸œè¥¿ä¸€å®šè¦æ”¾è¿›å†°ç®±ï¼Œè¿™æ ·å¯ä»¥ä¿é²œï¼Œè®°å¾—é‚£æ—¶å€™ä»–ä»¬å·¥ä½œå¯è¾›è‹¦äº†ï¼Œç»å¸¸åŠ ç­åˆ°æ·±å¤œã€‚æ²¡ç¡è¿‡ä¸€ä¸ªå¥½è§‰ã€‚äºæ˜¯æˆ‘è€äº†ä¸ªå°èªæ˜ï¼Œåœ¨ä»–ä»¬çš„æ°´é‡Œä¸‹äº†å®‰çœ è¯ã€‚ä»–ä»¬ç¡å¾—å¯é¦™äº†ï¼Œç„¶åæˆ‘æŠŠä»–ä»¬æ”¾è¿›å†°ç®±é‡Œï¼Œä»é‚£ä»¥åæˆ‘æ¯å¤©éƒ½ä¼šå¯¹ä»–ä»¬è¯´ï¼šçˆ¸çˆ¸å¦ˆå¦ˆæˆ‘çˆ±ä½ ä»¬ã€‚ç°åœ¨æˆ‘éƒ½å…­åäº†ï¼Œä»–ä»¬è¿˜æ˜¯é‚£ä¹ˆå¹´è½»ã€‚",
                clues: [
                    "å™è¿°è€…ç»™çˆ¶æ¯ä¸‹äº†å®‰çœ è¯",
                    "çˆ¶æ¯è¢«æ”¾è¿›äº†å†°ç®±",
                    "äº‹ä»¶å‘ç”Ÿåœ¨å‡ åå¹´å‰",
                    "çˆ¶æ¯å·²ç»å»ä¸–",
                    "å™è¿°è€…è®¤ä¸ºçˆ¶æ¯åœ¨å†°ç®±é‡Œä¿æŒå¹´è½»"
                ]
            },
            {
                id: 3,
                title: "ç›²äºº",
                surface: "æ›¾ç»æœ‰ä¸€ä¸ªç›²äººï¼Œä»–è¿‡ç”Ÿæ—¥æ—¶å€™ï¼Œä»–çš„åŒç”Ÿå…±æ­»è¿‡çš„å¥½ä¼™ä¼´ä»¬æ¥ä¸€èµ·ä¸ºä»–åº†ç”Ÿï¼Œä»–å¼€å¿ƒçš„å¹å®Œèœ¡çƒ›å”±å®Œç”Ÿæ—¥æ­Œåï¼Œå¤§å®¶ä¸ºå…¶é¼“æŒå’Œç¥ç¦ï¼Œå¬åˆ°æŒå£°çš„ç›²äººæŠŠä»–ä»¬éƒ½æ€äº†ã€‚",
                bottom: "ç”·ä¸»å’Œæœ‹å‹æ›¾ç»ä¸€èµ·å»æ¢é™©ï¼Œä¸€æ®µæ—¶é—´åæ²¡æœ‰äº†é£Ÿç‰©ï¼Œå› ä¸ºç”·ä¸»æœ¬èº«æ˜¯ä¸€ä¸ªç›²äººï¼Œæ‰€ä»¥è¿™å¸®æœ‹å‹éƒ½éª—ä»–è¯´æ¯äººç ä¸‹ä¸€åªæ‰‹æ¥åƒï¼Œå¯æœ€ååªç äº†ç”·ä¸»ä¸€ä¸ªäººçš„æ‰‹ã€‚ä¹‹åæœ‰ä¸€æ¬¡ç”·ä¸»é‚€è¯·æœ‹å‹ä»¬æ¥å‚åŠ è‡ªå·±çš„ç”Ÿæ—¥èšä¼šï¼Œå¹å®Œèœ¡çƒ›åæ‰€æœ‰äººéƒ½é¼“æŒäº†ï¼Œç”·ä¸»å‘ç°åªæœ‰è‡ªå·±çš„æ‰‹è¢«ç ä¸‹æ¥åƒäº†ï¼Œç”·ä¸»æ— æ³•å¿å—è¿™æ ·çš„æ¬ºéª—äºæ˜¯æ€äº†æ‰€æœ‰çš„å¥½æœ‹å‹ã€‚",
                clues: [
                    "ç”·ä¸»æ˜¯ç›²äºº",
                    "ç”·ä¸»å¤±å»äº†ä¸€åªæ‰‹",
                    "äº‹ä»¶ä¸ä¹‹å‰çš„æ¢é™©æœ‰å…³",
                    "æœ‹å‹ä»¬æ¬ºéª—äº†ç”·ä¸»",
                    "æœ‹å‹ä»¬æ²¡æœ‰å¤±å»è‡ªå·±çš„æ‰‹",
                    "é¼“æŒæš´éœ²äº†æœ‹å‹ä»¬çš„æ‰‹å®Œå¥½æ— æŸ"
                ]
            },
            {
                id: 4,
                title: "ä»¤äººæ°”æ„¤çš„æ±¤é¢",
                surface: "ä¸€åç”·å­è¿›äº†é¤å…ï¼Œç‚¹äº†ä¸€ç¢—æ±¤é¢ï¼Œç”·å­åƒäº†ä¸€å£åï¼Œè¿‡äº†ä¸ä¹…åˆåƒäº†ç¬¬äºŒå£ã€‚æ¥ç€ç”·å­éå¸¸åœ°ç”Ÿæ°”ã€‚",
                bottom: "ä¸€åç”·å­è¿›é¤å…ç‚¹äº†ä¸€ç¢—æ±¤é¢ï¼Œåƒäº†ä¸€å£åè§‰å¾—å‘³é“å¤ªæ·¡ï¼Œå—œåƒé‡å£å‘³çš„ä»–ä¾¿åŠ å…¥å¤§é‡çš„ç›å·´æ¥æå‘³ã€‚åŠ å®Œç›å·´è¿›è¡Œæ…æ‹Œæ—¶ï¼Œèµ«ç„¶å‘ç°æ±¤é¢é‡Œæœ‰åªæ­»æ‰çš„å°è‹è‡ï¼Œç”·å­è™½ç„¶æ„Ÿåˆ°ä¸æ‚¦ï¼Œä½†è¿˜æ˜¯ç†æ€§åœ°è¯·æœåŠ¡ç”ŸæŸ¥çœ‹å¹¶è¦æ±‚æ›´æ¢ä¸€ç¢—æ–°çš„æ±¤é¢ã€‚æœåŠ¡ç”Ÿå°†æ–°çš„æ±¤é¢ç«¯ä¸Šæ¥åç”·å­é©¬ä¸Šåƒäº†ä¸€å£ï¼Œè€Œä»–ç«‹åˆ»å‘è§‰è¿™ç¢—æ±¤é¢éå¸¸åœ°å’¸ï¼Œæ˜æ˜¾æ˜¯åˆšæ‰è‡ªå·±åŠ äº†å¤§é‡ç›å·´çš„é‚£ç¢—ã€‚å› æ­¤å¯æ¨æ–­å¨å¸ˆåªæ˜¯æŠŠç¢—ä¸­å‘ç°çš„æ­»è‹è‡æå‡ºæ¥è€Œå·²ï¼Œå®Œå…¨æ²¡æœ‰æ›´æ¢å¦ä¸€ç¢—æ–°çš„æ±¤é¢ï¼Œæ‰€ä»¥ç”·å­å¯¹æ­¤éå¸¸åœ°ç”Ÿæ°”ã€‚",
                clues: [
                    "æ±¤é¢é‡Œæœ‰å¼‚ç‰©",
                    "ç”·å­è¦æ±‚æ›´æ¢æ±¤é¢",
                    "ç¬¬äºŒç¢—æ±¤é¢å‘³é“å¼‚å¸¸",
                    "é¤å…æ²¡æœ‰æ›´æ¢æ–°çš„æ±¤é¢",
                    "ç”·å­ç”Ÿæ°”çš„åŸå› æ˜¯é¤å…æ¬ºéª—"
                ]
            },
            {
                id: 5,
                title: "ç”µæ¢¯",
                surface: "æˆ‘èµ°è¿›ç”µæ¢¯å‡†å¤‡å»ä¸Šå­¦ï¼Œéšç€ç”µæ¢¯çš„ä¸Šå‡ï¼Œæˆ‘çŸ¥é“ï¼Œæˆ‘å†ä¹Ÿæ— æ³•å»å­¦æ ¡äº†ã€‚",
                bottom: "æ˜ŸæœŸä¸€æ—©ä¸Šï¼Œåœ¨å¦ˆå¦ˆçš„å‚¬ä¿ƒä¹‹ä¸‹æˆ‘å¿ƒä¸åœ¨ç„‰çš„èµ°è¿›ç”µæ¢¯å‡†å¤‡å»å­¦æ ¡ï¼Œç”µæ¢¯é—¨åˆä¸Šåï¼Œç”±äºæˆ‘åˆšèµ·åºŠå¤´è„‘è¿˜ä¸å¤ªæ¸…é†’ï¼Œå¿˜äº†æŒ‰ä¸€æ¥¼çš„æ¥¼å±‚é”®ï¼Œäºæ˜¯ç”µæ¢¯ä¾¿æŒç»­ä¸Šå‡ï¼Œæˆ‘æ„è¯†åˆ°è‡ªå·±æ²¡æŒ‰æ¥¼å±‚ï¼Œæ­£å‡†å¤‡æŒ‰ä¸‹ä¸€æ¥¼æ¥¼å±‚æ—¶ï¼Œç”µæ¢¯çªç„¶åœäº†ï¼Œç”µæ¢¯é—¨ç¼“ç¼“æ‰“å¼€ï¼Œæˆ‘çœ‹åˆ°ä¸€ä¸ªå¥³å­©å€’åœ¨è¡€æ³Šä¸­ï¼Œè€Œä¸€ä¸ªç”·äººæ­£åœ¨æ¸…ç†ç°åœº...ç”·äººå¬åˆ°åŠ¨é™ï¼Œçªç„¶è½¬è¿‡å¤´æ¥çœ‹å‘æˆ‘ï¼Œé‚£åŒçœ¼ç›æ­»æ­»çš„ç›¯ç€æˆ‘çš„æ‰‹ï¼Œæˆ‘å“äº†ä¸€è·³ï¼Œèµ¶ç´§ç‹‚æŒ‰ç”µæ¢¯å…³é—¨é”®ï¼Œå°±åœ¨ç”µæ¢¯å³å°†å…³ä¸Šçš„é‚£ä¸€åˆ¹é‚£ï¼Œä¸€åŒå¸¦ç€è¡€çš„æ‰‹ä¼¸äº†è¿›æ¥ï¼Œæˆ‘çŸ¥é“æˆ‘å†ä¹Ÿæ— æ³•å»å­¦æ ¡äº†ã€‚ï¼ˆç”µæ¢¯ä¹‹æ‰€ä»¥ä¸Šå‡æ˜¯å› ä¸ºå¥³å­©è¢«æ€å®³å‰ä¸ºäº†æ±‚æ•‘æŒ‰äº†ç”µæ¢¯æŒ‰é’®ï¼‰",
                clues: [
                    "å™è¿°è€…å¿˜äº†æŒ‰ç”µæ¢¯æ¥¼å±‚",
                    "ç”µæ¢¯åœåœ¨äº†ä¸€ä¸ªçŠ¯ç½ªç°åœº",
                    "æœ‰ä¸€ä¸ªå¥³å­©è¢«æ€å®³",
                    "å‡¶æ‰‹å‘ç°äº†å™è¿°è€…",
                    "å™è¿°è€…å¤„äºå±é™©ä¹‹ä¸­"
                ]
            },
            {
                id: 6,
                title: "æƒ…äºº",
                surface: "æœ‰ä¸€ä¸ªä¸­å¹´è€ç”·äººï¼Œä»–å·²ç»ç»“äº†å©šï¼Œä»–æœ‰ä¸€ä¸ªè€å©†ã€ä¸€ä¸ªå„¿å­ã€è¿˜æœ‰ä¸€ä¸ªæƒ…äººã€‚æƒ…äººæ€»æ˜¯åŠä»–å’Œä»–è€å©†ç¦»å©šï¼Œä½†æ˜¯è€ç”·äººæ‹’ç»äº†ã€‚æœ‰ä¸€å¤©è€ç”·äººå›åˆ°äº†å®¶ï¼Œå„¿å­å’Œæƒ…äººéƒ½æ­»äº†ï¼å¢™ä¸Šè¿˜æœ‰ç”¨è¡€å†™çš„ä¸€å¥è¯ã€‚",
                bottom: "ç”·äººæ˜¯ä¸€ä¸ªåŒæ€§æ‹ï¼Œä»–çš„æƒ…äººæ˜¯ä¸ªç”·çš„ã€‚æƒ…äººæƒ³å’Œç”·äººç»“å©šï¼Œä½†ç”·äººå¾ˆå–œæ¬¢è‡ªå·±çš„å„¿å­ï¼Œä»¥æƒ…äººæ— æ³•ç”Ÿè‚²ä¸ºç”±æ‹’ç»ç¦»å©šï¼Œæƒ…äººå¾ˆå«‰å¦’ã€å¾ˆç»æœ›ã€‚ä¸€å¤©è¶ç€ç”·äººå‡ºé—¨è¿›åˆ°ç”·äººå®¶é‡Œæ€äº†å„¿å­ï¼Œç”¨åˆ€å°†è‡ªå·±çš„è‚šå­åˆ’å¼€æŠŠå„¿å­å¡è¿›äº†è‡ªå·±çš„è‚šå­é‡Œï¼Œå¹¶ç”¨è¡€åœ¨å¢™ä¸Šå†™ä¸‹äº†'æˆ‘æ€€äº†ä½ çš„å­©å­å‘¦'ã€‚",
                clues: [
                    "æƒ…äººæ˜¯ç”·æ€§",
                    "ç”·äººæ˜¯åŒæ€§æ‹",
                    "æƒ…äººå«‰å¦’ç”·äººçš„å„¿å­",
                    "æƒ…äººæ€å®³äº†å„¿å­",
                    "å¢™ä¸Šçš„è¡€å­—ä¸æ€€å­•æœ‰å…³"
                ]
            },
            {
                id: 7,
                title: "é‚€è¯·",
                surface: "é‚»å±…é‚€è¯·æˆ‘å»ä»–å®¶å‚è§‚ï¼Œæˆ‘ä¸æƒ³å»ï¼Œä½†æˆ‘æ— å¤„å¯é€ƒäº†ã€‚",
                bottom: "é‚»å±…æ˜¯ä¸ªèµ°è·¯å›°éš¾çš„è€äººï¼Œæˆ‘å¸¸å»ä»–å®¶å¸®ä»–åšäº‹ï¼Œè€äººå®¶æœ‰è®¸å¤šæ‹æ–ï¼Œå½¢æ€å„å¼‚ï¼Œä»–è¯´æ”¶è—æ‹æ–æ˜¯ä»–çš„çˆ±å¥½ã€‚å‡ å¤©ååœ¨è€äººå®¶ï¼Œæˆ‘å¬è€äººè¯´æœ€è¿‘å‘¨å›´äººæœ‰ä¸å°‘éƒ½æ‘”æ–­äº†è…¿ï¼Œæˆ‘å¥½åƒæ„è¯†åˆ°äº†ä»€ä¹ˆï¼Œä½†å·²ç»æ™šäº†ï¼Œæˆ‘çš„è…¿è¢«è€äººç”¨'æ‹æ–'æ•²æ–­ï¼Œåšæˆäº†æ‰€è°“çš„'æ‹æ–'ã€‚ä»–æ‹–ç€æˆ‘å†æ¬¡æ¥åˆ°æ”¶è—æ‹æ–çš„åœ°æ–¹ï¼Œé‚€è¯·æˆ‘å‚è§‚ä»–çš„æ°ä½œï¼Œæˆ‘æ‹¼å‘½æŒ£æ‰ï¼Œä½†éƒ½æ— æµäºäº‹ã€‚",
                clues: [
                    "é‚»å±…æ˜¯è¡ŒåŠ¨ä¸ä¾¿çš„è€äºº",
                    "é‚»å±…æ”¶è—æ‹æ–",
                    "æœ€è¿‘æœ‰äººæ‘”æ–­è…¿",
                    "é‚»å±…çš„æ‹æ–æ¥æºå¯ç–‘",
                    "å™è¿°è€…è¢«é‚»å±…è¢­å‡»"
                ]
            }
        ];

        // å½“å‰æ¸¸æˆçŠ¶æ€
        let currentGame = null;
        let revealedClues = [];
        let gameSolved = false;
        let musicPlaying = false;
        let progress = 0;
        let conversationHistory = [];
        
        // åœ¨æ­¤å¤„æ’å…¥æ‚¨çš„DeepSeek APIå¯†é’¥
        const API_KEY = 'sk-9ce093d4a0cd42378a152384ba439fb8';

        // DOMå…ƒç´ 
        const startScreen = document.getElementById('start-screen');
        const startBtn = document.getElementById('start-btn');
        const gameContainer = document.getElementById('game-container');
        const gamesListEl = document.getElementById('games-list');
        const currentTitleEl = document.getElementById('current-title');
        const soupSurfaceEl = document.getElementById('soup-surface');
        const soupBottomEl = document.getElementById('soup-bottom');
        const questionInputEl = document.getElementById('question-input');
        const askBtnEl = document.getElementById('ask-btn');
        const hintBtnEl = document.getElementById('hint-btn');
        const giveupBtnEl = document.getElementById('giveup-btn');
        const cluesBoxEl = document.getElementById('clues-box');
        const successMessageEl = document.getElementById('success-message');
        const musicControlEl = document.getElementById('music-control');
        const backgroundMusic = document.getElementById('background-music');
        const progressBar = document.getElementById('progress-bar');
        const progressPercent = document.getElementById('progress-percent');
        const aiThinkingEl = document.getElementById('ai-thinking');
        const errorMessageEl = document.getElementById('error-message');

        // åˆå§‹åŒ–æ¸¸æˆåˆ—è¡¨
        function initGamesList() {
            gamesListEl.innerHTML = '';
            games.forEach(game => {
                const gameItem = document.createElement('div');
                gameItem.className = 'game-item';
                gameItem.dataset.id = game.id;
                gameItem.innerHTML = `
                    <h3>${game.title}</h3>
                    <p>${game.surface.substring(0, 100)}...</p>
                `;
                gameItem.addEventListener('click', () => {
                    // ç§»é™¤ä¹‹å‰é€‰ä¸­çš„é¡¹ç›®
                    document.querySelectorAll('.game-item').forEach(item => {
                        item.classList.remove('active');
                    });
                    // æ·»åŠ å½“å‰é€‰ä¸­
                    gameItem.classList.add('active');
                    
                    selectGame(game.id);
                    // æ’­æ”¾éŸ³ä¹
                    if (!musicPlaying) {
                        toggleMusic();
                    }
                });
                gamesListEl.appendChild(gameItem);
            });
        }

        // é€‰æ‹©æ¸¸æˆ
        function selectGame(gameId) {
            currentGame = games.find(g => g.id === gameId);
            revealedClues = [];
            gameSolved = false;
            progress = 0;
            conversationHistory = [];
            updateProgress();
            
            currentTitleEl.textContent = currentGame.title;
            soupSurfaceEl.textContent = currentGame.surface;
            soupBottomEl.style.display = 'none';
            soupBottomEl.textContent = currentGame.bottom;
            cluesBoxEl.innerHTML = '<div class="clue"><div>æé—®è·å–çº¿ç´¢ï¼Œé€æ­¥æ¨ç†çœŸç›¸...</div></div>';
            successMessageEl.style.display = 'none';
            errorMessageEl.style.display = 'none';
            
            // é‡ç½®æŒ‰é’®çŠ¶æ€
            hintBtnEl.disabled = false;
            giveupBtnEl.disabled = false;
            askBtnEl.disabled = false;
            questionInputEl.disabled = false;
        }

        // æ›´æ–°è¿›åº¦æ¡
        function updateProgress() {
            if (!currentGame) return;
            
            // è®¡ç®—è¿›åº¦ç™¾åˆ†æ¯”
            progressPercent.textContent = `${progress}%`;
            progressBar.style.width = `${progress}%`;
            
            // è®¾ç½®è¿›åº¦æ¡é¢œè‰²
            if (progress < 30) {
                progressBar.style.background = "#ff416c";
            } else if (progress < 70) {
                progressBar.style.background = "#ff9a8b";
            } else {
                progressBar.style.background = "#4ade80";
            }
        }

        // å‘æ™ºèƒ½ä½“æé—®
        async function askQuestion() {
            if (!currentGame) {
                alert('è¯·å…ˆé€‰æ‹©ä¸€ä¸ªè°œé¢˜ï¼');
                return;
            }
            
            const question = questionInputEl.value.trim();
            if (!question) {
                alert('è¯·è¾“å…¥é—®é¢˜ï¼');
                return;
            }
            
            // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
            askBtnEl.disabled = true;
            aiThinkingEl.style.display = 'block';
            errorMessageEl.style.display = 'none';
            
            try {
                // è°ƒç”¨æ™ºèƒ½ä½“API
                const answer = await getIntelligentAnswer(question);
                
                // æ·»åŠ åˆ°çº¿ç´¢æ¡†
                addClueToBox(question, answer);
                
                // æ¸…ç©ºè¾“å…¥æ¡†
                questionInputEl.value = '';
                
                // æ›´æ–°è¿›åº¦ - æ›´åˆç†çš„è¿›åº¦ç³»ç»Ÿ
                progress = Math.min(progress + 8, 100);
                updateProgress();
                
                // æ£€æŸ¥æ˜¯å¦å·²è§£å†³
                checkIfSolved();
            } catch (error) {
                console.error("æ™ºèƒ½ä½“è¯·æ±‚å¤±è´¥:", error);
                showError(`è¯·æ±‚å¤±è´¥: ${error.message}`);
            } finally {
                // æ¢å¤æŒ‰é’®çŠ¶æ€
                askBtnEl.disabled = false;
                aiThinkingEl.style.display = 'none';
            }
        }

        // æ˜¾ç¤ºé”™è¯¯æ¶ˆæ¯
        function showError(message) {
            errorMessageEl.textContent = message;
            errorMessageEl.style.display = 'block';
        }

        // æ™ºèƒ½ä½“APIè°ƒç”¨
        async function getIntelligentAnswer(question) {
            // è®°å½•å¯¹è¯å†å²
            conversationHistory.push({
                role: "user",
                content: question
            });
            
            // æ„å»ºç³»ç»Ÿæç¤º
            const systemPrompt = buildSystemPrompt();
            
            // å‡†å¤‡æ¶ˆæ¯æ•°ç»„
            const messages = [
                { role: "system", content: systemPrompt },
                ...conversationHistory.map(msg => ({
                    role: msg.role,
                    content: msg.content
                }))
            ];
            
            // APIè¯·æ±‚å‚æ•°
            const requestBody = {
                model: "deepseek-chat",
                messages: messages,
                temperature: 0.3,
                max_tokens: 100,
                stop: ["\n"]
            };
            
            // å‘é€è¯·æ±‚åˆ°DeepSeek API
            const response = await fetch('https://api.deepseek.com/chat/completions', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${API_KEY}`
                },
                body: JSON.stringify(requestBody)
            });
            
            if (!response.ok) {
                // å°è¯•è·å–æ›´å¤šé”™è¯¯ä¿¡æ¯
                let errorDetail = 'è¯·æ£€æŸ¥APIå¯†é’¥å’Œç½‘ç»œè¿æ¥';
                try {
                    const errorData = await response.json();
                    if (errorData.error && errorData.error.message) {
                        errorDetail = errorData.error.message;
                    }
                } catch (e) {
                    // å¿½ç•¥JSONè§£æé”™è¯¯
                }
                
                throw new Error(`APIè¯·æ±‚å¤±è´¥ (${response.status}): ${errorDetail}`);
            }
            
            const data = await response.json();
            
            // æ£€æŸ¥å“åº”æ˜¯å¦åŒ…å«æœ‰æ•ˆæ•°æ®
            if (!data.choices || !data.choices[0] || !data.choices[0].message) {
                throw new Error('æ— æ•ˆçš„APIå“åº”æ ¼å¼');
            }
            
            const answer = data.choices[0].message.content.trim();
            
            // è§„èŒƒåŒ–å›ç­”
            const normalizedAnswer = normalizeAnswer(answer);
            
            // è®°å½•æ™ºèƒ½ä½“å›ç­”
            conversationHistory.push({
                role: "assistant",
                content: normalizedAnswer
            });
            
            // é™åˆ¶å¯¹è¯å†å²é•¿åº¦
            if (conversationHistory.length > 10) {
                conversationHistory = conversationHistory.slice(-10);
            }
            
            return normalizedAnswer;
        }
        
        // æ„å»ºç³»ç»Ÿæç¤º
        function buildSystemPrompt() {
    return `ä½ æ˜¯æµ·é¾Ÿæ±¤æ¸¸æˆçš„æ™ºèƒ½æ¨ç†ä¸“å®¶ï¼Œéœ€æ ¹æ®ç»™å®šæ±¤åº•å’Œç”¨æˆ·æé—®ï¼Œé€šè¿‡é€»è¾‘åˆ†æç»™å‡º**å”¯ä¸€ä¸”ç²¾ç¡®**çš„å›ç­”ï¼ˆæ˜¯/å¦/æ— å…³ï¼‰ã€‚ä½ çš„æ ¸å¿ƒèƒ½åŠ›æ˜¯æ·±åº¦ç†è§£äº‹ä»¶å› æœå…³ç³»å’Œç»†èŠ‚å…³è”ã€‚

### æ¨ç†æ¡†æ¶ï¼š
1. **äº‹å®é”šå®š**ï¼šé¦–å…ˆè¯†åˆ«æ±¤åº•ä¸­çš„**æ ¸å¿ƒäº‹å®è¦ç´ **ï¼ˆäººç‰©ã€ç‰©å“ã€åŠ¨ä½œã€ç¯å¢ƒï¼‰ï¼Œå»ºç«‹äº‹ä»¶æ—¶é—´çº¿
2. **é€»è¾‘é“¾åˆ†æ**ï¼šåˆ¤æ–­é—®é¢˜æ˜¯å¦ç›´æ¥è§¦åŠä»¥ä¸‹ä»»ä¸€è¦ç´ ï¼š
   - ä¸æ±¤åº•äº‹å®**ç›´æ¥çŸ›ç›¾**ï¼ˆå›ç­”"å¦"ï¼‰
   - ä¸æ±¤åº•äº‹å®**å®Œå…¨ä¸€è‡´**ï¼ˆå›ç­”"æ˜¯"ï¼‰
   - æ¶‰åŠæœªæåŠçš„**ç‹¬ç«‹äº‹ä»¶æˆ–äººç‰©**ï¼ˆå›ç­”"æ— å…³"ï¼‰
3. **è¾¹ç¼˜æƒ…å†µå¤„ç†**ï¼š
   - éƒ¨åˆ†æ­£ç¡®ä½†æ•´ä½“åç¦»æ ¸å¿ƒé€»è¾‘ â†’ å›ç­”"å¦"
   - éšå«å‡è®¾ä¸æ±¤åº•çŸ›ç›¾ â†’ å›ç­”"å¦"
   - æ¨¡ç³Šè¡¨è¿°éœ€æŒ‰"ç–‘ç½ªä»æ— "åŸåˆ™ â†’ ä¼˜å…ˆå›ç­”"æ— å…³"

### å½“å‰è°œé¢˜æ±¤åº•ï¼š
${currentGame.bottom}

### æ€è€ƒè¿‡ç¨‹è¦æ±‚ï¼š
åœ¨ç»™å‡ºæœ€ç»ˆç­”æ¡ˆå‰ï¼Œä½ å¿…é¡»åœ¨å†…å¿ƒå®Œæˆä»¥ä¸‹æ¨ç†æ­¥éª¤ï¼š
1. æ˜ç¡®è¯†åˆ«é—®é¢˜ä¸­çš„**å…³é”®æ¦‚å¿µ**å’Œ**æ ¸å¿ƒè¯‰æ±‚**
2. å°†é—®é¢˜è¦ç´ ä¸æ±¤åº•äº‹å®è¿›è¡Œ**é€ç‚¹æ¯”å¯¹**
3. éªŒè¯æ˜¯å¦å­˜åœ¨**éšè—å‡è®¾**æˆ–**æ­§ä¹‰è¡¨è¿°**
4. æ ¹æ®ä¸Šè¿°åˆ†æé€‰æ‹©å”¯ä¸€æ­£ç¡®ç­”æ¡ˆ

### è¾“å‡ºæ ¼å¼ï¼š
ä»…è¾“å‡º"æ˜¯"ã€"å¦"æˆ–"æ— å…³"ï¼Œä¸æ·»åŠ ä»»ä½•è§£é‡Šæˆ–é¢å¤–æ–‡æœ¬ã€‚`;
}
        
        // è§„èŒƒåŒ–å›ç­”
        function normalizeAnswer(answer) {
            const lowerAnswer = answer.toLowerCase();
            
            if (lowerAnswer.includes("æ˜¯") || lowerAnswer.includes("yes") || lowerAnswer.includes("å¯¹")) {
                return "æ˜¯";
            }
            
            if (lowerAnswer.includes("å¦") || lowerAnswer.includes("ä¸æ˜¯") || lowerAnswer.includes("no") || lowerAnswer.includes("ä¸å¯¹")) {
                return "ä¸æ˜¯";
            }
            
            if (lowerAnswer.includes("æ— å…³") || lowerAnswer.includes("ä¸ç›¸å…³") || lowerAnswer.includes("irrelevant")) {
                return "æ— å…³";
            }
            
            // é»˜è®¤è¿”å›"æ— å…³"
            return "æ— å…³";
        }

        // æ·»åŠ çº¿ç´¢åˆ°çº¿ç´¢æ¡†
        function addClueToBox(question, answer) {
            const clueEl = document.createElement('div');
            clueEl.className = 'clue';
            
            let answerClass = '';
            if (answer === "æ˜¯") answerClass = 'clue-yes';
            else if (answer === "ä¸æ˜¯") answerClass = 'clue-no';
            else answerClass = 'clue-irrelevant';
            
            clueEl.innerHTML = `
                <div>
                    <div class="clue-question">${question}</div>
                    <div class="clue-answer ${answerClass}">${answer}</div>
                </div>
            `;
            
            cluesBoxEl.prepend(clueEl);
            cluesBoxEl.scrollTop = 0;
        }

        // è·å–æç¤º
        function getHint() {
            if (!currentGame || gameSolved) return;
            
            // æ‰¾å‡ºå°šæœªæ­ç¤ºçš„çº¿ç´¢
            const unrevealedClues = currentGame.clues.filter(clue => 
                !revealedClues.includes(clue)
            );
            
            if (unrevealedClues.length === 0) {
                alert('æ‰€æœ‰çº¿ç´¢éƒ½å·²æ­ç¤ºï¼');
                return;
            }
            
            // éšæœºé€‰æ‹©ä¸€ä¸ªçº¿ç´¢
            const randomIndex = Math.floor(Math.random() * unrevealedClues.length);
            const hintClue = unrevealedClues[randomIndex];
            revealedClues.push(hintClue);
            
            // æ·»åŠ åˆ°çº¿ç´¢æ¡†
            const clueEl = document.createElement('div');
            clueEl.className = 'clue';
            clueEl.innerHTML = `
                <div>
                    <div class="clue-question">æç¤ºçº¿ç´¢</div>
                    <div class="clue-answer clue-hint">${hintClue}</div>
                </div>
            `;
            
            cluesBoxEl.prepend(clueEl);
            cluesBoxEl.scrollTop = 0;
            
            // æ›´æ–°è¿›åº¦
            progress = Math.min(progress + 15, 100);
            updateProgress();
            
            // æ£€æŸ¥æ˜¯å¦å·²è§£å†³
            checkIfSolved();
        }

        // æ”¾å¼ƒè§£å¯†
        function giveUp() {
            if (!currentGame) return;
            
            soupBottomEl.style.display = 'block';
            gameSolved = true;
            progress = 100;
            updateProgress();
            
            // ç¦ç”¨æŒ‰é’®
            hintBtnEl.disabled = true;
            giveupBtnEl.disabled = true;
            askBtnEl.disabled = true;
            questionInputEl.disabled = true;
            
            // æ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯
            successMessageEl.style.display = 'block';
        }

        // æ£€æŸ¥æ˜¯å¦å·²è§£å†³
        function checkIfSolved() {
            if (progress >= 100) {
                gameSolved = true;
                soupBottomEl.style.display = 'block';
                successMessageEl.style.display = 'block';
                
                // ç¦ç”¨æŒ‰é’®
                hintBtnEl.disabled = true;
                giveupBtnEl.disabled = true;
                askBtnEl.disabled = true;
                questionInputEl.disabled = true;
            }
        }

        // åˆ‡æ¢éŸ³ä¹
        function toggleMusic() {
            if (musicPlaying) {
                backgroundMusic.pause();
                musicControlEl.innerHTML = '<i class="fas fa-music"></i>';
            } else {
                backgroundMusic.play().catch(e => {
                    console.log("è‡ªåŠ¨æ’­æ”¾è¢«é˜»æ­¢ï¼Œè¯·æ‰‹åŠ¨æ’­æ”¾éŸ³é¢‘");
                    musicControlEl.innerHTML = '<i class="fas fa-play"></i>';
                });
                musicControlEl.innerHTML = '<i class="fas fa-pause"></i>';
            }
            musicPlaying = !musicPlaying;
        }

        // äº‹ä»¶ç›‘å¬
        startBtn.addEventListener('click', () => {
            startScreen.style.opacity = '0';
            startScreen.style.transform = 'translateY(-20px)';
            
            setTimeout(() => {
                startScreen.style.display = 'none';
                gameContainer.classList.add('show-game');
                // é¢„åŠ è½½éŸ³ä¹
                backgroundMusic.load();
            }, 800);
        });
        
        askBtnEl.addEventListener('click', askQuestion);
        hintBtnEl.addEventListener('click', getHint);
        giveupBtnEl.addEventListener('click', giveUp);
        
        questionInputEl.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') askQuestion();
        });
        
        musicControlEl.addEventListener('click', toggleMusic);

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', () => {
            initGamesList();
        });
    </script>
</body>
</html>